{"remainingRequest":"/home/qc/Documents/Coding/vuetify-clinic-dashboard-/node_modules/babel-loader/lib/index.js!/home/qc/Documents/Coding/vuetify-clinic-dashboard-/node_modules/eslint-loader/index.js??ref--13-0!/home/qc/Documents/Coding/vuetify-clinic-dashboard-/src/store/modules/user/actions.js","dependencies":[{"path":"/home/qc/Documents/Coding/vuetify-clinic-dashboard-/src/store/modules/user/actions.js","mtime":1581225491753},{"path":"/home/qc/Documents/Coding/vuetify-clinic-dashboard-/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/qc/Documents/Coding/vuetify-clinic-dashboard-/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/qc/Documents/Coding/vuetify-clinic-dashboard-/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.string.trim\";\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nexport default {\n  LoginByEmail: function LoginByEmail(_ref, userInfo) {\n    var commit = _ref.commit;\n    var username = userInfo.username.trim();\n    var password = userInfo.password.trim();\n    return new Promise(function (resolve, reject) {\n      axios.get('/api/getTokenFromLogin', {\n        params: {\n          username: username,\n          password: password\n        }\n      }).then(function (response) {\n        var data = response.data;\n        Cookies.set('Admin-Token', data[0].token);\n        commit('SET_TOKEN', data[0].token);\n        resolve();\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  // 获取用户信息\n  GetInfo: function GetInfo(_ref2) {\n    var commit = _ref2.commit,\n        state = _ref2.state;\n    return new Promise(function (resolve, reject) {\n      axios.get('/api/getUserInfo', {\n        params: {\n          token: state.token\n        }\n      }).then(function (response) {\n        var data = response.data;\n        commit('SET_ROLES', data[0].role);\n        commit('SET_PREFIX', data[0].dbs_prefix);\n        resolve(response);\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  // 第三方验证登录\n  LoginByThirdparty: function LoginByThirdparty(_ref3, code) {\n    var commit = _ref3.commit,\n        state = _ref3.state;\n    return new Promise(function (resolve, reject) {\n      commit('SET_CODE', code);\n      loginByThirdparty(state.status, state.email, state.code, state.auth_type).then(function (response) {\n        commit('SET_TOKEN', response.data.token);\n        Cookies.set('Admin-Token', response.data.token);\n        resolve();\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  // 登出\n  LogOut: function LogOut(_ref4) {\n    var commit = _ref4.commit,\n        state = _ref4.state;\n    return new Promise(function (resolve, reject) {\n      logout(state.token).then(function () {\n        commit('SET_TOKEN', '');\n        commit('SET_ROLES', []);\n        Cookies.remove('Admin-Token');\n        resolve();\n      }).catch(function (error) {\n        reject(error);\n      });\n    });\n  },\n  // 前端 登出\n  FedLogOut: function FedLogOut(_ref5) {\n    var commit = _ref5.commit;\n    return new Promise(function (resolve) {\n      commit('SET_TOKEN', '');\n      Cookies.remove('Admin-Token');\n      alert(\"has logout\");\n      resolve();\n    });\n  },\n  // 动态修改权限\n  ChangeRole: function ChangeRole(_ref6, role) {\n    var commit = _ref6.commit;\n    return new Promise(function (resolve) {\n      commit('SET_ROLES', [role]);\n      commit('SET_TOKEN', role);\n      Cookies.set('Admin-Token', role);\n      resolve();\n    });\n  }\n};",{"version":3,"sources":["/home/qc/Documents/Coding/vuetify-clinic-dashboard-/src/store/modules/user/actions.js"],"names":["axios","Cookies","LoginByEmail","userInfo","commit","username","trim","password","Promise","resolve","reject","get","params","then","response","data","set","token","catch","error","GetInfo","state","role","dbs_prefix","LoginByThirdparty","code","loginByThirdparty","status","email","auth_type","LogOut","logout","remove","FedLogOut","alert","ChangeRole"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AAEA,eAAe;AACdC,EAAAA,YADc,8BACWC,QADX,EACqB;AAAA,QAApBC,MAAoB,QAApBA,MAAoB;AAClC,QAAMC,QAAQ,GAAGF,QAAQ,CAACE,QAAT,CAAkBC,IAAlB,EAAjB;AACA,QAAMC,QAAQ,GAAGJ,QAAQ,CAACI,QAAT,CAAkBD,IAAlB,EAAjB;AACA,WAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCV,MAAAA,KAAK,CAACW,GAAN,CAAU,wBAAV,EAAmC;AAClCC,QAAAA,MAAM,EAAE;AACPP,UAAAA,QAAQ,EAAGA,QADJ;AAEPE,UAAAA,QAAQ,EAAGA;AAFJ;AAD0B,OAAnC,EAKIM,IALJ,CAKS,UAAAC,QAAQ,EAAI;AACpB,YAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAtB;AACAd,QAAAA,OAAO,CAACe,GAAR,CAAY,aAAZ,EAA2BD,IAAI,CAAC,CAAD,CAAJ,CAAQE,KAAnC;AACAb,QAAAA,MAAM,CAAC,WAAD,EAAcW,IAAI,CAAC,CAAD,CAAJ,CAAQE,KAAtB,CAAN;AACAR,QAAAA,OAAO;AACP,OAVD,EAUGS,KAVH,CAUS,UAAAC,KAAK,EAAG;AAChBT,QAAAA,MAAM,CAACS,KAAD,CAAN;AACA,OAZD;AAaA,KAdM,CAAP;AAeA,GAnBa;AAsBd;AACAC,EAAAA,OAvBc,0BAuBa;AAAA,QAAjBhB,MAAiB,SAAjBA,MAAiB;AAAA,QAATiB,KAAS,SAATA,KAAS;AAC1B,WAAO,IAAIb,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCV,MAAAA,KAAK,CAACW,GAAN,CAAU,kBAAV,EAA6B;AAC5BC,QAAAA,MAAM,EAAE;AACPK,UAAAA,KAAK,EAAGI,KAAK,CAACJ;AADP;AADoB,OAA7B,EAIIJ,IAJJ,CAIS,UAAAC,QAAQ,EAAI;AACpB,YAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAtB;AACAX,QAAAA,MAAM,CAAC,WAAD,EAAcW,IAAI,CAAC,CAAD,CAAJ,CAAQO,IAAtB,CAAN;AACAlB,QAAAA,MAAM,CAAC,YAAD,EAAcW,IAAI,CAAC,CAAD,CAAJ,CAAQQ,UAAtB,CAAN;AACAd,QAAAA,OAAO,CAACK,QAAD,CAAP;AACA,OATD,EASGI,KATH,CASS,UAAAC,KAAK,EAAI;AACjBT,QAAAA,MAAM,CAACS,KAAD,CAAN;AACA,OAXD;AAYA,KAbM,CAAP;AAcA,GAtCa;AAwCd;AACAK,EAAAA,iBAzCc,oCAyCuBC,IAzCvB,EAyC6B;AAAA,QAAvBrB,MAAuB,SAAvBA,MAAuB;AAAA,QAAfiB,KAAe,SAAfA,KAAe;AAC1C,WAAO,IAAIb,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCN,MAAAA,MAAM,CAAC,UAAD,EAAaqB,IAAb,CAAN;AACAC,MAAAA,iBAAiB,CAACL,KAAK,CAACM,MAAP,EAAeN,KAAK,CAACO,KAArB,EAA4BP,KAAK,CAACI,IAAlC,EAAwCJ,KAAK,CAACQ,SAA9C,CAAjB,CAA0EhB,IAA1E,CAA+E,UAAAC,QAAQ,EAAI;AAC1FV,QAAAA,MAAM,CAAC,WAAD,EAAcU,QAAQ,CAACC,IAAT,CAAcE,KAA5B,CAAN;AACAhB,QAAAA,OAAO,CAACe,GAAR,CAAY,aAAZ,EAA2BF,QAAQ,CAACC,IAAT,CAAcE,KAAzC;AACAR,QAAAA,OAAO;AACP,OAJD,EAIGS,KAJH,CAIS,UAAAC,KAAK,EAAI;AACjBT,QAAAA,MAAM,CAACS,KAAD,CAAN;AACA,OAND;AAOA,KATM,CAAP;AAUA,GApDa;AAuDd;AACAW,EAAAA,MAxDc,yBAwDY;AAAA,QAAjB1B,MAAiB,SAAjBA,MAAiB;AAAA,QAATiB,KAAS,SAATA,KAAS;AACzB,WAAO,IAAIb,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvCqB,MAAAA,MAAM,CAACV,KAAK,CAACJ,KAAP,CAAN,CAAoBJ,IAApB,CAAyB,YAAM;AAC9BT,QAAAA,MAAM,CAAC,WAAD,EAAc,EAAd,CAAN;AACAA,QAAAA,MAAM,CAAC,WAAD,EAAc,EAAd,CAAN;AACAH,QAAAA,OAAO,CAAC+B,MAAR,CAAe,aAAf;AACAvB,QAAAA,OAAO;AACP,OALD,EAKGS,KALH,CAKS,UAAAC,KAAK,EAAI;AACjBT,QAAAA,MAAM,CAACS,KAAD,CAAN;AACA,OAPD;AAQA,KATM,CAAP;AAUA,GAnEa;AAqEd;AACAc,EAAAA,SAtEc,4BAsEQ;AAAA,QAAV7B,MAAU,SAAVA,MAAU;AACrB,WAAO,IAAII,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC7BL,MAAAA,MAAM,CAAC,WAAD,EAAc,EAAd,CAAN;AACAH,MAAAA,OAAO,CAAC+B,MAAR,CAAe,aAAf;AACAE,MAAAA,KAAK,CAAC,YAAD,CAAL;AACAzB,MAAAA,OAAO;AACP,KALM,CAAP;AAMA,GA7Ea;AA+Ed;AACA0B,EAAAA,UAhFc,6BAgFSb,IAhFT,EAgFe;AAAA,QAAhBlB,MAAgB,SAAhBA,MAAgB;AAC5B,WAAO,IAAII,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC7BL,MAAAA,MAAM,CAAC,WAAD,EAAc,CAACkB,IAAD,CAAd,CAAN;AACAlB,MAAAA,MAAM,CAAC,WAAD,EAAckB,IAAd,CAAN;AACArB,MAAAA,OAAO,CAACe,GAAR,CAAY,aAAZ,EAA2BM,IAA3B;AACAb,MAAAA,OAAO;AACP,KALM,CAAP;AAMA;AAvFa,CAAf","sourcesContent":["import axios from 'axios';\nimport Cookies from 'js-cookie';\n\nexport default {\n\tLoginByEmail({ commit }, userInfo) {\n\t\tconst username = userInfo.username.trim();\n\t\tconst password = userInfo.password.trim();\n\t\treturn new Promise((resolve, reject) => {\n\t\t\taxios.get('/api/getTokenFromLogin',{\n\t\t\t\tparams: {\n\t\t\t\t\tusername : username,\n\t\t\t\t\tpassword : password,\n\t\t\t\t\t}\n\t\t\t\t}).then(response => {\n\t\t\t\tconst data = response.data;\n\t\t\t\tCookies.set('Admin-Token', data[0].token);\n\t\t\t\tcommit('SET_TOKEN', data[0].token);\n\t\t\t\tresolve();\n\t\t\t}).catch(error =>{\n\t\t\t\treject(error);\n\t\t\t});\n\t\t});\n\t},\n\n\n\t// 获取用户信息\n\tGetInfo({ commit, state }) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\taxios.get('/api/getUserInfo',{\n\t\t\t\tparams: {\n\t\t\t\t\ttoken : state.token\n\t\t\t\t\t}\n\t\t\t\t}).then(response => {\n\t\t\t\tconst data = response.data;\n\t\t\t\tcommit('SET_ROLES', data[0].role);\n\t\t\t\tcommit('SET_PREFIX',data[0].dbs_prefix);\n\t\t\t\tresolve(response);\n\t\t\t}).catch(error => {\n\t\t\t\treject(error);\n\t\t\t});\n\t\t});\n\t},\n\n\t// 第三方验证登录\n\tLoginByThirdparty({ commit, state }, code) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tcommit('SET_CODE', code);\n\t\t\tloginByThirdparty(state.status, state.email, state.code, state.auth_type).then(response => {\n\t\t\t\tcommit('SET_TOKEN', response.data.token);\n\t\t\t\tCookies.set('Admin-Token', response.data.token);\n\t\t\t\tresolve();\n\t\t\t}).catch(error => {\n\t\t\t\treject(error);\n\t\t\t});\n\t\t});\n\t},\n\n\n\t// 登出\n\tLogOut({ commit, state }) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlogout(state.token).then(() => {\n\t\t\t\tcommit('SET_TOKEN', '');\n\t\t\t\tcommit('SET_ROLES', []);\n\t\t\t\tCookies.remove('Admin-Token');\n\t\t\t\tresolve();\n\t\t\t}).catch(error => {\n\t\t\t\treject(error);\n\t\t\t});\n\t\t});\n\t},\n\n\t// 前端 登出\n\tFedLogOut({ commit }) {\n\t\treturn new Promise(resolve => {\n\t\t\tcommit('SET_TOKEN', '');\n\t\t\tCookies.remove('Admin-Token');\n\t\t\talert(\"has logout\");\n\t\t\tresolve();\n\t\t});\n\t},\n\n\t// 动态修改权限\n\tChangeRole({ commit }, role) {\n\t\treturn new Promise(resolve => {\n\t\t\tcommit('SET_ROLES', [role]);\n\t\t\tcommit('SET_TOKEN', role);\n\t\t\tCookies.set('Admin-Token', role);\n\t\t\tresolve();\n\t\t})\n\t}\n}"]}]}