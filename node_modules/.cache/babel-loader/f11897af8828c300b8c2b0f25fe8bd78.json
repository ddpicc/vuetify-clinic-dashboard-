{"remainingRequest":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/babel-loader/lib/index.js!/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/vuetify-loader/lib/loader.js!/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/qc/Documents/vuetify-clinic-dashboard-/src/views/OrderList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/src/views/OrderList.vue","mtime":1581225491753},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.array.index-of\";\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar pinyin = require(\"pinyin\");\n\nexport default {\n  data: function data() {\n    return {\n      searchStr: '',\n      deleteEnabled: false,\n      loading: false,\n      expanded: [],\n      snackbar: false,\n      snackbarColor: '',\n      notification: '',\n      headers: [{\n        text: '',\n        value: 'data-table-expand'\n      }, {\n        text: '序号',\n        value: 'id'\n      }, {\n        sortable: false,\n        text: '名字',\n        value: 'patient'\n      }, {\n        sortable: false,\n        text: '类型',\n        value: 'medtype'\n      }, {\n        sortable: false,\n        text: '数量',\n        value: 'dose'\n      }, {\n        sortable: false,\n        text: '总价',\n        value: 'total'\n      }, {\n        sortable: true,\n        text: '日期',\n        value: 'date'\n      }, {\n        sortable: false,\n        text: '操作',\n        value: 'action'\n      }],\n      items: []\n    };\n  },\n  methods: {\n    //搜索\n    filterText: function filterText(value, search, item) {\n      if (value != null && search != null && typeof value === 'string') {\n        if (value.toString().indexOf(search) !== -1 || pinyin(value.toString(), {\n          style: pinyin.STYLE_FIRST_LETTER\n        }).join(\"\").indexOf(search) !== -1) {\n          return true;\n        }\n      } else {\n        return false;\n      }\n    },\n    // 获取全部数据\n    getAll: function getAll() {\n      var _this = this;\n\n      this.loading = true;\n      this.$http.get('/api/getAllOrd', {\n        params: {\n          dbs: this.$store.state.user.dbs_prefix + 'ordlist'\n        }\n      }).then(function (res) {\n        _this.items = res.data;\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _this.items[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var element = _step.value;\n            element.medarray = element.medarray.split(\";\");\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        _this.loading = false;\n      });\n    },\n    getColor: function getColor(medtype) {\n      if (medtype == '免煎') return 'lime darken-2';else if (medtype == '西药') return 'blue lighten-2';else return 'green';\n    },\n    reuse: function reuse() {},\n    //获取当前时间，格式YYYY-MM-DD\n    getNowFormatDate: function getNowFormatDate() {\n      var date = new Date();\n      var seperator1 = \"/\";\n      var year = date.getFullYear(); //年\n\n      var month = date.getMonth() + 1; //月\n\n      var strDate = date.getDate(); //日\n\n      if (month >= 1 && month <= 9) {\n        month = \"0\" + month;\n      }\n\n      if (strDate >= 0 && strDate <= 9) {\n        strDate = \"0\" + strDate;\n      }\n\n      var currentdate = year + seperator1 + month + seperator1 + strDate;\n      return currentdate;\n    },\n    deleteItem: function deleteItem(ordId) {\n      var _this2 = this;\n\n      this.$http.delete('/api/deleteOrdbyId', {\n        params: {\n          dbs: this.$store.state.user.dbs_prefix + 'ordlist',\n          id: ordId\n        }\n      }).then(function (res) {\n        _this2.snackbar = true;\n        _this2.notification = '删除成功';\n        _this2.snackbarColor = 'green';\n\n        _this2.getAll();\n      });\n    },\n    canDelete: function canDelete(item) {\n      if (this.deleteEnabled) {\n        /* if(this.getNowFormatDate() == item.date)\n          return true;\n        else */\n        return true;\n      } else return false;\n    }\n  },\n  mounted: function mounted() {\n    this.getAll();\n  }\n};",{"version":3,"sources":["OrderList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-container\n    fill-height\n    fluid\n    grid-list-xl\n  >\n    <v-row justify=\"center\">\n      <v-col cols=\"12\">\n        <material-card flat color=\"green\">\n          <template v-slot:header>\n            <div class=\"px-3\">\n              <div class=\"title font-weight-light mb-2\">\n                &nbsp;&nbsp;&nbsp;&nbsp;处&nbsp;&nbsp;&nbsp;&nbsp;方\n              </div>\n            </div>\n\t\t\t\t\t\t<v-spacer />   \n\n\t\t\t\t\t\t<v-btn\n              absolute\n              dark\n              fab\n              top\n              right\n              color=\"amber\"\n              @click=\"deleteEnabled = !deleteEnabled\"\n            >\n              <v-icon>mdi-plus</v-icon>\n            </v-btn>\n          </template>\n          <!--  need a key of id -->\n          <v-data-table\n            :headers=\"headers\"\n            :items=\"items\"\n            item-key=\"id\"\n            show-expand\n            single-expand\n            :expanded.sync=\"expanded\"\n            :items-per-page=\"15\"\n            :search=\"searchStr\"\n            :custom-filter=\"filterText\"\n            loading=\"loading\"\n          >\n          <template v-slot:top>\n            <v-text-field v-model=\"searchStr\" label=\"搜索...\" class=\"mx-4\"></v-text-field>\n          </template>\n          <template v-slot:item.action=\"{ item }\">\n            <v-icon\n              small\n              class=\"mr-2\"\n              @click=\"reuse(item)\"\n            >\n              mdi-pencil\n            </v-icon>\n            <v-icon v-if=\"canDelete(item)\"\n              small\n              @click=\"deleteItem(item.id)\"\n            >\n              mdi-close\n            </v-icon>\n          </template>\n          <template v-slot:item.medtype=\"{ item }\">\n            <v-chip :color=\"getColor(item.medtype)\" dark>{{ item.medtype }}</v-chip>\n          </template>\n          <template v-slot:expanded-item=\"{ item }\">\n            <td :colspan=\"8\">\n              <v-btn text small color=\"green\">打印</v-btn>\n              <div>\n                <h4 style=\"text-align:center;\">处  方</h4>\n                <br>\n                <hr style=\"height:1px;border:none;border-top:1px solid #555555;\" />\n                 <v-simple-table>\n                  <template v-slot:default>\n                    <tbody>\n                      <tr>\n                        <td :colspan=\"2\"><p>姓名： {{item.patient}}</p></td>\n                        <td :colspan=\"2\"><p>年龄： {{item.patient_age}}</p></td>\n                        <td :colspan=\"2\"><p>性别： {{item.patient_sex}}</p></td>\n                        <td :colspan=\"2\"><p>电话:  {{item.patient_phone}}</p></td>\n                      </tr>\n                      <tr>\n                        <td  :colspan=\"6\" style=\"border-bottom:1px solid\"><p>症状： {{item.symptom}}</p></td>\n                        <td  :colspan=\"2\" style=\"border-bottom:1px solid\"><p>备注： {{item.order_comment}}</p></td>\n                      </tr>\n                      <tr v-for=\"element in item.medarray\" :key=\"element.name\">\n                        <td>{{ JSON.parse(element).name1 }}</td>\n                        <td>{{ JSON.parse(element).count1 }}</td>\n                        <td>{{ JSON.parse(element).name2 }}</td>\n                        <td>{{ JSON.parse(element).count2 }}</td>\n                        <td>{{ JSON.parse(element).name3 }}</td>\n                        <td>{{ JSON.parse(element).count3 }}</td>\n                        <td>{{ JSON.parse(element).name4 }}</td>\n                        <td>{{ JSON.parse(element).count4 }}</td>\n                      </tr>\n                      <tr>\n                        <td :colspan=\"6\"></td>\n                        <td :colspan=\"2\"><p>{{item.dose}}付</p></td>\n                      </tr>\n                      <tr>\n                        <td :colspan=\"6\" style=\"border-bottom:1px solid\"></td>\n                        <td :colspan=\"2\" style=\"border-bottom:1px solid\"><p>价钱： {{item.total}}元</p></td>\n                      </tr>\n                      <tr>\n                        <td :colspan=\"6\"><p>处方医师：  崔云杰</p></td>\n                        <td :colspan=\"2\"><p>日期： {{item.date}}</p></td>\n                      </tr>\n                    </tbody>\n                  </template>\n                </v-simple-table>\n              </div>\n            </td>              \n          </template>\n          </v-data-table>\n          <v-snackbar\n            v-model=\"snackbar\"\n            :color=\"snackbarColor\"\n            :timeout=\"3000\"\n            top\n            dark\n          >\n            <v-icon\n              color=\"white\"\n              class=\"mr-3\"\n            >\n              mdi-bell-plus\n            </v-icon>\n            {{notification}}\n            <v-btn\n              icon\n              @click=\"snackbar = false\"\n            >\n              <v-icon>\n                mdi-close-circle\n              </v-icon>\n            </v-btn>\n          </v-snackbar>\n        </material-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\n  var pinyin = require(\"pinyin\");\n  export default {\n    data: () => ({\n      searchStr: '',\n      deleteEnabled: false,\n      loading: false,\n      expanded: [],\n      snackbar: false,\n      snackbarColor: '',\n      notification: '',\n      headers: [\n        { text: '', value: 'data-table-expand' },\n        { text: '序号', value: 'id' },\n        {\n          sortable: false,\n          text: '名字',\n          value: 'patient'\n        },\n        {\n          sortable: false,\n          text: '类型',\n          value: 'medtype'\n        },\n        {\n          sortable: false,\n          text: '数量',\n          value: 'dose'\n        },\n        {\n          sortable: false,\n          text: '总价',\n          value: 'total',\n        },\n        {\n          sortable: true,\n          text: '日期',\n          value: 'date',\n        },\n        {\n          sortable: false,\n          text: '操作',\n          value: 'action',\n        }\n      ],\n      items: []\n    }),\n\n    methods: {\n      //搜索\n      filterText (value, search, item) {\n        if(value !=null && search !=null && typeof value === 'string'){\n          if(value.toString().indexOf(search) !== -1 || pinyin(value.toString(),{style: pinyin.STYLE_FIRST_LETTER}).join(\"\").indexOf(search) !== -1){\n            return true;\n          }\n        }else{\n          return false;\n        }\n      },\n\n      // 获取全部数据\n      getAll: function() {\n        this.loading = true;\n        this.$http.get('/api/getAllOrd',{\n          params: {\n            dbs : this.$store.state.user.dbs_prefix+'ordlist',\n\t\t\t\t\t}\n        }).then( (res) => {\n          this.items = res.data;\n          for(let element of this.items) {\n            element.medarray = element.medarray.split(\";\");\n          }\n          this.loading = false;\n        })\n      },\n\n      getColor (medtype) {\n        if (medtype == '免煎') return 'lime darken-2'\n        else if (medtype == '西药') return 'blue lighten-2'\n        else return 'green'\n      },\n\n      reuse: function(){\n\n      },\n\n      //获取当前时间，格式YYYY-MM-DD\n      getNowFormatDate() {\n\t\t\t\tvar date = new Date();\n\t\t\t\tvar seperator1 = \"/\";\n\t\t\t\tvar year = date.getFullYear();  //年\n\t\t\t\tvar month = date.getMonth() + 1;   //月\n\t\t\t\tvar strDate = date.getDate();   //日\n\t\t\t\tif (month >= 1 && month <= 9) {\n\t\t\t\t\tmonth = \"0\" + month;\n\t\t\t\t}\n\t\t\t\tif (strDate >= 0 && strDate <= 9) {\n\t\t\t\t\tstrDate = \"0\" + strDate;\n\t\t\t\t}\n\t\t\t\tvar currentdate = year + seperator1 + month + seperator1 + strDate;\n\t\t\t\treturn currentdate;\n      },\n\n      deleteItem(ordId){\n        this.$http.delete('/api/deleteOrdbyId',{\n          params: {\n            dbs : this.$store.state.user.dbs_prefix+'ordlist',\n\t\t\t\t\t\tid : ordId\n\t\t\t\t\t}\n        }).then( (res) => {\n          this.snackbar = true;\n          this.notification = '删除成功';\n          this.snackbarColor = 'green';\n          this.getAll();\n        })\n      },\n\n      canDelete: function(item){\n        if(this.deleteEnabled){\n          /* if(this.getNowFormatDate() == item.date)\n            return true;\n          else */\n            return true;\n        }\n        else\n          return false;\n      }\n    },\n\n    mounted: function() {\n\t\t\tthis.getAll();\n\t\t}\n\n    \n  }\n</script>\n"],"sourceRoot":"src/views"}]}