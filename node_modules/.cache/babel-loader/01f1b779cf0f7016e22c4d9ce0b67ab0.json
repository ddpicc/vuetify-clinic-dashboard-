{"remainingRequest":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/babel-loader/lib/index.js!/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/vuetify-loader/lib/loader.js!/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/qc/Documents/vuetify-clinic-dashboard-/src/views/MedList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/src/views/MedList.vue","mtime":1581225491753},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/vuetify-loader/lib/loader.js","mtime":1564062719000},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/qc/Documents/vuetify-clinic-dashboard-/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.date.to-string\";\nimport \"core-js/modules/es6.array.index-of\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      searchStr: '',\n      medRadio: '草药',\n      medTypeItems: ['草药', '免煎', '西药'],\n      adddialog: false,\n      loading: false,\n      cardColor: 'green',\n      dialogTitle: '',\n      snackbar: false,\n      snackbarColor: '',\n      notification: '',\n      headers: [{\n        sortable: false,\n        text: '药品名称',\n        value: 'medname'\n      }, {\n        sortable: false,\n        text: '别名',\n        value: 'alias'\n      }, {\n        sortable: false,\n        text: '规格',\n        value: 'spec'\n      }, {\n        sortable: false,\n        text: '袋/盒',\n        value: 'bagperbox'\n      }, {\n        sortable: true,\n        text: '数量',\n        value: 'inventoryNm'\n      }, {\n        sortable: false,\n        text: '进价',\n        value: 'baseprice'\n      }, {\n        sortable: false,\n        text: '零售价',\n        value: 'sellprice'\n      }, {\n        sortable: false,\n        text: '监测',\n        value: 'checked'\n      }, {\n        sortable: false,\n        text: '操作',\n        value: 'action'\n      }],\n      items: [],\n      dialogMedName: \"\",\n      dialogAlias: \"\",\n      dialogSpec: \"\",\n      dialogMedRadio: \"草药\",\n      dialogBagPerBox: \"\",\n      dialogInventoryNm: \"\",\n      dialogBaseprice: \"\",\n      dialogSellprice: \"\",\n      dialogChecked: 0,\n      dialogMedId: \"\"\n    };\n  },\n  methods: {\n    //搜索\n    filterText: function filterText(value, search, item) {\n      return value != null && search != null && typeof value === 'string' && value.toString().indexOf(search) !== -1;\n    },\n    // 根据类型获取药品数据\n    getAll: function getAll() {\n      var _this = this;\n\n      this.loading = true;\n      this.$http.get('/api/getAllMedbyType', {\n        params: {\n          dbs: this.$store.state.user.dbs_prefix + 'medlist',\n          medtype: this.medRadio\n        }\n      }).then(function (res) {\n        _this.items = res.data;\n        _this.loading = false;\n      });\n    },\n    //当类型变化时改变颜色和重新读取数据\n    radioChanged: function radioChanged() {\n      this.getAll();\n\n      if (this.medRadio == \"西药\") {\n        this.cardColor = 'blue lighten-2';\n      } else if (this.medRadio == \"免煎\") {\n        this.cardColor = 'lime darken-2';\n      } else {\n        this.cardColor = 'green';\n      }\n    },\n    backTop: function backTop() {\n      document.body.scrollTop = 0;\n      document.documentElement.scrollTop = 0;\n    },\n    addMedShow: function addMedShow() {\n      this.adddialog = true;\n      this.dialogTitle = \"新增药品\";\n      this.dialogMedRadio = this.medRadio;\n    },\n    editItem: function editItem(item) {\n      this.adddialog = true;\n      this.dialogTitle = \"修改药品\";\n      this.dialogMedName = item.medname;\n      this.dialogAlias = item.alias;\n      this.dialogSpec = item.spec;\n      this.dialogMedRadio = this.medRadio;\n      this.dialogBagPerBox = item.bagperbox;\n      this.dialogInventoryNm = item.inventoryNm;\n      this.dialogBaseprice = item.baseprice;\n      this.dialogSellprice = item.sellprice;\n      this.dialogChecked = item.checked;\n      this.dialogMedId = item.id;\n    },\n    clearVariable: function clearVariable() {\n      this.dialogMedName = '';\n      this.dialogAlias = '';\n      this.dialogSpec = '';\n      this.dialogMedRadio = '草药';\n      this.dialogBagPerBox = '';\n      this.dialogInventoryNm = '';\n      this.dialogBaseprice = '';\n      this.dialogSellprice = '';\n      this.dialogChecked = '';\n    },\n    cancelDialog: function cancelDialog() {\n      this.clearVariable();\n      this.adddialog = false;\n    },\n    saveDialog: function saveDialog() {\n      var _this2 = this;\n\n      if (this.dialogTitle === \"修改药品\") {\n        this.$http.post('/api/updateMedbyId', {\n          dbs: this.$store.state.user.dbs_prefix + 'medlist',\n          medname: this.dialogMedName,\n          alias: this.dialogAlias,\n          spec: this.dialogSpec,\n          medtype: this.dialogMedRadio,\n          bagperbox: this.dialogBagPerBox,\n          inventoryNm: this.dialogInventoryNm,\n          baseprice: this.dialogBaseprice,\n          sellprice: this.dialogSellprice,\n          checked: this.dialogChecked,\n          id: this.dialogMedId\n        }).then(function (res) {\n          _this2.snackbar = true;\n          _this2.notification = '修改成功';\n          _this2.snackbarColor = 'green';\n\n          _this2.getAll();\n        });\n      } else if (this.dialogTitle === \"新增药品\") {\n        this.$http.post('/api/insertMed', {\n          dbs: this.$store.state.user.dbs_prefix + 'medlist',\n          medname: this.dialogMedName,\n          alias: this.dialogAlias,\n          spec: this.dialogSpec,\n          medtype: this.dialogMedRadio,\n          bagperbox: this.dialogBagPerBox,\n          inventoryNm: this.dialogInventoryNm,\n          baseprice: this.dialogBaseprice,\n          sellprice: this.dialogSellprice,\n          checked: this.dialogChecked\n        }).then(function (res) {\n          //alert(res.data.insertId);\n          _this2.snackbar = true;\n          _this2.notification = '增加成功';\n          _this2.snackbarColor = 'green';\n\n          _this2.getAll();\n        });\n      }\n\n      this.adddialog = false;\n      this.clearVariable();\n    },\n    deleteItem: function deleteItem(medId) {\n      var _this3 = this;\n\n      this.$http.delete('/api/deleteMedbyId', {\n        params: {\n          dbs: this.$store.state.user.dbs_prefix + 'medlist',\n          id: medId\n        }\n      }).then(function (res) {\n        _this3.snackbar = true;\n        _this3.notification = '删除成功';\n        _this3.snackbarColor = 'green';\n\n        _this3.getAll();\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getAll();\n  }\n};",{"version":3,"sources":["MedList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-container\n    fill-height\n    fluid\n    grid-list-xl\n  >\n    <v-row justify=\"center\">\n      <v-col cols=\"12\">\n        <material-card flat full-width :color=cardColor>\n          <template v-slot:header>\n            <div class=\"px-3\">\n              <div class=\"title font-weight-light mb-2\">\n                <v-radio-group v-model=\"medRadio\" :mandatory=\"false\" row @change=\"radioChanged\">\n                  <v-radio label=\"草药\" value=\"草药\" color=\"grey darken-1\"></v-radio>\n                  <v-radio label=\"免煎\" value=\"免煎\" color=\"grey darken-1\"></v-radio>\n                  <v-radio label=\"西药\" value=\"西药\" color=\"grey darken-1\"></v-radio>\n                </v-radio-group>\n              </div>\n            </div>\n\n            <v-spacer />   \n\n            <v-btn\n              absolute\n              dark\n              fab\n              top\n              right\n              color=\"amber\"\n              @click=\"addMedShow\"\n            >\n              <v-icon>mdi-plus</v-icon>\n            </v-btn>\n          </template>\n          <v-data-table\n            :headers=\"headers\"\n            :items=\"items\"\n            item-key=\"name\"\n            :items-per-page=\"15\"\n            :search=\"searchStr\"\n            :custom-filter=\"filterText\"\n            loading=\"loading\"\n          >\n          <template v-slot:top>\n            <v-text-field v-model=\"searchStr\" label=\"搜索...\" class=\"mx-4\"></v-text-field>\n          </template>\n          <template v-slot:item.action=\"{ item }\">\n            <v-icon\n              small\n              class=\"mr-2\"\n              @click=\"editItem(item)\"\n            >\n              mdi-pencil\n            </v-icon>\n            <v-icon\n              small\n              @click=\"deleteItem(item.id)\"\n            >\n              mdi-close\n            </v-icon>\n          </template>\n          </v-data-table>\n          <div class=\"text-center pt-2\">\n            <v-btn block :color=cardColor dark class=\"mr-2\" @click=\"backTop\">回到顶部</v-btn>\n          </div>\n          <v-dialog v-model=\"adddialog\" persistent max-width=\"600px\">\n            <v-card>\n              <v-card-title>\n                <span class=\"headline\">{{dialogTitle}}</span>\n              </v-card-title>\n              <v-card-text>\n                <v-container>\n                  <v-row>\n                    <v-col cols=\"12\" sm=\"4\" md=\"6\">\n                      <v-text-field label=\"名称*\" v-model=\"dialogMedName\" required></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"4\" md=\"3\">\n                      <v-text-field label=\"别名*\" v-model=\"dialogAlias\" hint=\"别名将会用在快速搜索\"></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"4\" md=\"3\">\n                      <v-text-field label=\"规格\" v-model=\"dialogSpec\" ></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"4\" md=\"4\">\n                      <v-select v-model=\"dialogMedRadio\" \n                        :items=\"medTypeItems\"\n                        label=\"类别\"\n                      ></v-select>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"4\" md=\"4\">\n                      <v-text-field label=\"袋/盒\" v-model=\"dialogBagPerBox\"></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"4\" md=\"4\">\n                      <v-text-field label=\"数量\" v-model=\"dialogInventoryNm\"></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"4\" md=\"4\">\n                      <v-text-field label=\"进价\" v-model=\"dialogBaseprice\"></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"4\" md=\"4\">\n                      <v-text-field label=\"零售价\" v-model=\"dialogSellprice\"></v-text-field>\n                    </v-col>\n                    <v-col cols=\"12\" sm=\"4\" md=\"4\">\n                      <v-switch v-model=\"dialogChecked\" color=\"blue\" label=\"库存监测\"></v-switch>\n                    </v-col>                    \n                  </v-row>\n                </v-container>\n                <small>*表示选项是必填的</small>\n              </v-card-text>\n              <v-card-actions>\n                <v-spacer></v-spacer>\n                <v-btn color=\"blue darken-1\" text @click=\"cancelDialog\">取消</v-btn>\n                <v-btn color=\"blue darken-1\" text @click=\"saveDialog\">保存</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-dialog>\n          <v-snackbar\n            v-model=\"snackbar\"\n            :color=\"snackbarColor\"\n            :timeout=\"3000\"\n            top\n            dark\n          >\n            <v-icon\n              color=\"white\"\n              class=\"mr-3\"\n            >\n              mdi-bell-plus\n            </v-icon>\n            {{notification}}\n            <v-btn\n              icon\n              @click=\"snackbar = false\"\n            >\n              <v-icon>\n                mdi-close-circle\n              </v-icon>\n            </v-btn>\n          </v-snackbar>\n        </material-card>\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\n  export default {\n    data: () => ({\n      searchStr: '',\n      medRadio: '草药',\n      medTypeItems: ['草药','免煎','西药'],\n      adddialog: false,\n      loading: false,\n      cardColor: 'green',\n      dialogTitle: '',\n      snackbar: false,\n      snackbarColor: '',\n      notification: '',\n      headers: [\n        {\n          sortable: false,\n          text: '药品名称',\n          value: 'medname'\n        },\n        {\n          sortable: false,\n          text: '别名',\n          value: 'alias'\n        },\n        {\n          sortable: false,\n          text: '规格',\n          value: 'spec'\n        },\n        {\n          sortable: false,\n          text: '袋/盒',\n          value: 'bagperbox',\n        },\n        {\n          sortable: true,\n          text: '数量',\n          value: 'inventoryNm',\n        },\n        {\n          sortable: false,\n          text: '进价',\n          value: 'baseprice',\n        },\n        {\n          sortable: false,\n          text: '零售价',\n          value: 'sellprice',\n        },\n        {\n          sortable: false,\n          text: '监测',\n          value: 'checked',\n        },\n        {\n          sortable: false,\n          text: '操作',\n          value: 'action',\n        },\n      ],\n      items: [],\n      dialogMedName: \"\",\n      dialogAlias: \"\",\n      dialogSpec: \"\",\n      dialogMedRadio: \"草药\",\n      dialogBagPerBox: \"\",\n      dialogInventoryNm: \"\",\n      dialogBaseprice: \"\",\n      dialogSellprice: \"\",\n      dialogChecked: 0,\n      dialogMedId: \"\"\n    }),\n\n    methods: {\n      //搜索\n      filterText (value, search, item) {\n        return value != null &&\n          search != null &&\n          typeof value === 'string' &&\n          value.toString().indexOf(search) !== -1\n      },\n\n      // 根据类型获取药品数据\n      getAll: function() {\n        this.loading = true;\n        this.$http.get('/api/getAllMedbyType',{\n          params: {\n            dbs : this.$store.state.user.dbs_prefix+'medlist',\n\t\t\t\t\t\tmedtype : this.medRadio\n\t\t\t\t\t}\n        }).then( (res) => {\n          this.items = res.data;\n          this.loading = false;\n        })\n      },\n      \n      //当类型变化时改变颜色和重新读取数据\n      radioChanged: function(){\n        this.getAll();\n        if(this.medRadio == \"西药\"){\n          this.cardColor = 'blue lighten-2';\n\t\t\t\t}else if(this.medRadio == \"免煎\"){\n          this.cardColor = 'lime darken-2';\n\t\t\t\t}else{\n          this.cardColor = 'green';\n        }\t\t\t\t\t\n      },\n\n      backTop() {\n        document.body.scrollTop = 0\n        document.documentElement.scrollTop = 0\n      },\n\n      addMedShow: function(){\n        this.adddialog = true;\n        this.dialogTitle = \"新增药品\";\n        this.dialogMedRadio = this.medRadio;\n      },\n\n      editItem: function(item){\n        this.adddialog = true;\n        this.dialogTitle = \"修改药品\";\n        this.dialogMedName = item.medname;\n        this.dialogAlias = item.alias;\n        this.dialogSpec = item.spec;\n        this.dialogMedRadio = this.medRadio;\n        this.dialogBagPerBox = item.bagperbox;\n        this.dialogInventoryNm = item.inventoryNm;\n        this.dialogBaseprice = item.baseprice;\n        this.dialogSellprice = item.sellprice;\n        this.dialogChecked = item.checked;\n        this.dialogMedId = item.id;\n      },\n\n      clearVariable: function(){\n        this.dialogMedName = '';\n        this.dialogAlias = '';\n        this.dialogSpec = '';\n        this.dialogMedRadio = '草药';\n        this.dialogBagPerBox = '';\n        this.dialogInventoryNm = '';\n        this.dialogBaseprice = '';\n        this.dialogSellprice = '';\n        this.dialogChecked = '';\n      },\n\n      cancelDialog: function(){\n        this.clearVariable();\n        this.adddialog = false;\n      },\n\n      saveDialog: function(){\n        if(this.dialogTitle === \"修改药品\"){\n          this.$http.post('/api/updateMedbyId',{   \n              dbs : this.$store.state.user.dbs_prefix+'medlist',      \n              medname : this.dialogMedName,\n              alias : this.dialogAlias,\n              spec : this.dialogSpec,\n              medtype : this.dialogMedRadio,\n              bagperbox : this.dialogBagPerBox,\n              inventoryNm : this.dialogInventoryNm,\n              baseprice : this.dialogBaseprice,\n              sellprice : this.dialogSellprice,\n              checked : this.dialogChecked,\n              id: this.dialogMedId            \n          }).then( (res) => {\n            this.snackbar = true;\n            this.notification = '修改成功';\n            this.snackbarColor = 'green';\n            this.getAll();\n          })\n        }else if(this.dialogTitle === \"新增药品\"){\n          this.$http.post('/api/insertMed',{\n              dbs : this.$store.state.user.dbs_prefix+'medlist',          \n              medname : this.dialogMedName,\n              alias : this.dialogAlias,\n              spec : this.dialogSpec,\n              medtype : this.dialogMedRadio,\n              bagperbox : this.dialogBagPerBox,\n              inventoryNm : this.dialogInventoryNm,\n              baseprice : this.dialogBaseprice,\n              sellprice : this.dialogSellprice,\n              checked : this.dialogChecked,           \n          }).then( (res) => {\n            //alert(res.data.insertId);\n            this.snackbar = true;\n            this.notification = '增加成功';\n            this.snackbarColor = 'green';\n            this.getAll();\n          })\n        }\n        this.adddialog = false;\n        this.clearVariable();        \n      },\n\n      deleteItem(medId){\n        this.$http.delete('/api/deleteMedbyId',{\n          params: {\n            dbs : this.$store.state.user.dbs_prefix+'medlist',\n\t\t\t\t\t\tid : medId\n\t\t\t\t\t}\n        }).then( (res) => {\n          this.snackbar = true;\n          this.notification = '删除成功';\n          this.snackbarColor = 'green';\n          this.getAll();\n        })\n      }\n    },\n\n    mounted: function() {\n\t\t\tthis.getAll();\n\t\t}\n\n    \n  }\n</script>\n"],"sourceRoot":"src/views"}]}